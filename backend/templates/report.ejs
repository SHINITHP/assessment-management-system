<!DOCTYPE html>
<html>
<head>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    .page-break-avoid {
      page-break-inside: avoid;
      break-inside: avoid;
    }
  </style>
</head>
<body class="bg-slate-100">
  <section class="bg-slate-100">
      <header
        class="w-full bg-[#1a2c47] py-9 h-72 px-10 text-white flex flex-col justify-between items-center"
      >
        <div class="w-full flex flex-col justify-center items-center gap-3">
          <h1 class="flex items-center space-x-2 gap-2 text-4xl font-bold">
            ðŸ©º MEDICAL CARE
          </h1>
          <p class="font-extralight text-lg tracking-widest">
            Medical Care <%= header %>
          </p>
        </div>

        <div class="w-full flex justify-end">
          <p class="font-medium text-lg">
            <strong>Date of assessment : </strong> <%= footer %>
          </p>
        </div>
      </header>

      <main class="w-full py-8 px-10">
        <% sections.forEach((section, index) => { %>
          <div class="w-full flex flex-col justify-center items-center">
            <h1
              class="font-bold flex justify-center bg-white items-center py-4 w-72 border rounded-md text-center text-lg text-blue-950"
            >
              <%= section.title %>
            </h1>

            <% section.fields.forEach(field => { %>
              <div class="page-break-avoid w-full py-14 flex justify-between items-center">
                <% if (typeof field !== 'undefined' && field.label) { %>
                  <div class="flex flex-col gap-3 pr-4">
                    <h1 class="flex gap-2 font-bold text-blue-950 text-lg">
                      <%= field.label %>
                    </h1>
                    <p>
                      This score is based on the assessment you have completed.
                      Offering a clear snapshot of your current health and fitness.
                      Use it to track progress and target areas for improvement.
                    </p>
                  </div>
                <% } %>


                  <div class="flex flex-col gap-3 pr-4">
                    <% field.sections.forEach(sec => { %>
                      <h1 class="flex gap-2 font-bold text-blue-950 text-lg">
                        <%= sec.label %>
                      </h1>
                      <ul class="list-disc pl-8">
                        <% sec.value[0].forEach(val => { %>
                          <li class="text-md"><%= val %></li>
                        <% }) %>
                      </ul>
                    <% }) %>
                  </div>


                <div class="bg-white min-w-64 border flex flex-col gap-3 rounded-xl px-4 py-4">
                  <!-- Highlight current classification -->
                  <div class="flex items-center w-fit px-4 py-1 rounded-lg <%= field.bgColorClass %> opacity-85">
                    <span class="font-medium <%= field.textColorClass %>">
                      <%= field.clsLabel %>
                    </span>
                  </div>

                  <h1 class="font-bold px-2 text-blue-950 text-3xl flex items-center">
                    <%= field.value %> <span class="font-medium text-sm pl-1"><%= field.unit %></span>
                  </h1>
                
                 
                
                  <!-- All classification labels dynamically -->
                  <div class="flex justify-between text-xs mt-1 w-full">
                    <% field.classifications?.forEach(cls => { %>
                      <span 
                        class="flex-1 text-center font-medium border-b-2 pb-0.5 
                               <%= field.clsLabel === cls.label 
                                    ? `text-${field.color}-600 border-${field.color}-600` 
                                    : 'text-gray-600 border-gray-400' %>">
                        <%= cls.label %>
                      </span>
                    <% }) %>
                  </div>

                  <!-- Optional: scale values -->
                  <div class="flex justify-between text-xs text-gray-500">
                    <% field.classifications?.forEach(cls => { %>
                      <span><%= cls.min %></span>
                    <% }) %>
                  </div>
                </div>
              </div>
            <% }) %>
          </div>
        <% }) %>
      </main>
    </section>
</body>
</html>
